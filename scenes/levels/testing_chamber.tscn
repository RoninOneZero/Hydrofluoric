[gd_scene load_steps=10 format=3 uid="uid://dc4sd5cossm7g"]

[ext_resource type="Environment" uid="uid://bvgpcxhejd5h8" path="res://scenes/levels/testing_chamber_environment.tres" id="1_2w6oh"]
[ext_resource type="PackedScene" uid="uid://f2s0ywesc3mu" path="res://scenes/interface/TacticalOverlay/TacticalOverlay.tscn" id="1_wsmn4"]
[ext_resource type="MeshLibrary" uid="uid://1brq7076km8r" path="res://scenes/levels/level components/tile_mesh_library.tres" id="1_wtyos"]
[ext_resource type="AudioStream" uid="uid://db8gsgbr5uidp" path="res://assets/Spy Music/Enter_Espionage_115s.wav" id="3_mvlx8"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_qfqq3"]

[sub_resource type="GDScript" id="GDScript_b6s3r"]
script/source = "extends MeshInstance3D

## Custom description
@export var target_location: Vector3

@onready
var nav: NavigationAgent3D = get_node(\"NavigationAgent3D\")

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	nav.target_position = target_location
	print(nav.get_current_navigation_path())


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"

[sub_resource type="Animation" id="Animation_j5mlh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(9, 3, 9)]
}

[sub_resource type="Animation" id="Animation_fq8n7"]
resource_name = "walk"
length = 8.0
loop_mode = 1
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2, 4, 6, 8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(9, 3, 9), Vector3(9, 3, 1), Vector3(1, 3, 1), Vector3(1, 3, 9), Vector3(9, 3, 9)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_p1f3u"]
_data = {
"RESET": SubResource("Animation_j5mlh"),
"walk": SubResource("Animation_fq8n7")
}

[node name="TestingChamber" type="WorldEnvironment"]
environment = ExtResource("1_2w6oh")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="Agent" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9, 3, 9)
mesh = SubResource("CapsuleMesh_qfqq3")
script = SubResource("GDScript_b6s3r")
target_location = Vector3(5, 5, 5)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="Agent"]
debug_enabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Agent"]
autoplay = "walk"
libraries = {
"": SubResource("AnimationLibrary_p1f3u")
}

[node name="GridMap" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1)
mesh_library = ExtResource("1_wtyos")
data = {
"cells": PackedInt32Array(0, 0, 1441792, 1, 0, 1441792, 2, 0, 1441792, 3, 0, 1441792, 0, 1, 1441792, 3, 1, 1441792, 2, 1, 1441792, 2, 2, 1441792, 1, 2, 1441792, 0, 2, 1441792, 3, 2, 1441792, 3, 3, 1441792, 2, 3, 1441792, 1, 3, 1441792, 0, 3, 1441792, 1, 1, 1441792, 4, 0, 1441792, 4, 1, 1441792, 4, 2, 1441792, 4, 3, 1441792, 4, 4, 1441792, 3, 4, 1441792, 2, 4, 1441792, 1, 4, 1441792, 0, 4, 1441792, 65538, 2, 1441792, 65538, 1, 1441792, 65537, 2, 1441792, 65539, 2, 1441792, 65538, 3, 1441792, 0, 65535, 1441792, 1, 65535, 1441792, 2, 65535, 1441792, 3, 65535, 1441792, 4, 65535, 1441792, 5, 65535, 1441792, 5, 0, 1441792, 5, 1, 1441792, 5, 2, 1441792, 5, 3, 1441792, 5, 4, 1441792, 5, 5, 1441792, 4, 5, 1441792, 3, 5, 1441792, 2, 5, 1441792, 1, 5, 1441792, 0, 5, 1441792, 65535, 5, 1441792, 65535, 4, 1441792, 65535, 3, 1441792, 65535, 2, 1441792, 65535, 1, 1441792, 65535, 0, 1441792, 65535, 65535, 1441792, 131071, 65535, 1441792, 65536, 65535, 1441792, 65537, 65535, 1441792, 65538, 65535, 1441792, 65539, 65535, 1441792, 65540, 65535, 1441792, 65541, 65535, 1441792, 65541, 0, 1441792, 65541, 1, 1441792, 65541, 2, 1441792, 65541, 3, 1441792, 65541, 4, 1441792, 65541, 5, 1441792, 65540, 5, 1441792, 65539, 5, 1441792, 65538, 5, 1441792, 65537, 5, 1441792, 65536, 5, 1441792, 131071, 5, 1441792, 131071, 4, 1441792, 131071, 3, 1441792, 131071, 2, 1441792, 131071, 1, 1441792, 131071, 0, 1441792)
}
metadata/_editor_floor_ = Vector3(0, 1, 0)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.771627, -0.449418, 0.450128, 0, 0.707666, 0.706548, -0.636075, -0.545191, 0.546054, 10.0434, 10.0675, 10.7849)
current = true

[node name="GameInterface" parent="." instance=ExtResource("1_wsmn4")]

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_mvlx8")
autoplay = true
